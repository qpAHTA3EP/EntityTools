/*
Данный шаблон Т4 добавляет в класс Engine:
- свойство CompilationTimestampUtc возвращающее дату компиляции сборки
- поле compilationTick содержащее количество Ticks, соответствующее дате компиляции сборки
- статический конструктор, инициализирующий функтор Validator(), возвращающий TRUE если DateTime.Now (дата запуска сборки на исполнение) 
  отстоит от даты компиляции не более чем на 87 дней

<seealso href="https://question-it.com/questions/5003025/otobrazhenie-daty-sborki" />
<seealso href="https://habr.com/ru/post/64895/" />
*/

<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ assembly name="System.Core" #>
<#@ import namespace="System" #>
<#@ output extension="cs" #>
using System;
namespace EntityCore
{
    public partial class Engine
    {
        private static DateTime CompilationTimestampUtc { get { return new DateTime(<# Write(DateTime.UtcNow.Ticks.ToString()); #>L, DateTimeKind.Local); } }
        private static readonly long compilationTick = <# Write(DateTime.UtcNow.Ticks.ToString()); #>L; 

        static Engine()
        {
            long ticks = DateTime.Now.AddDays(-87).Ticks - <# Write(DateTime.UtcNow.Ticks.ToString()); #>L;
            bool result = ticks <= 0;
            Validation = () => ticks <= 0;
        }
    }
}